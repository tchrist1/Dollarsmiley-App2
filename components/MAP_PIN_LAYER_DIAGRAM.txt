â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘     NATIVE MAP PIN LAYER STRUCTURE (Visual Diagram)           â•‘
â•‘     Mapbox ShapeSource + Multi-Layer Composition               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RENDERING ORDER (Bottom to Top)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Layer 6: Price/Quote Label Text
           â•”â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  $250.00  â•‘  â† SymbolLayer (text)
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•     â€¢ textField: ['get', 'priceLabel']
               â•‘             â€¢ textColor: bubbleColor
               â•‘             â€¢ textTranslate: [0, 36]
               â•‘
  Layer 5: Label Background Pill
           â•”â•â•â•â•â•â•â•â•â•â•â•â•—
           â•‘           â•‘  â† CircleLayer
           â•šâ•â•â•â•â•â•â•â•â•â•â•â•     â€¢ circleColor: #FFFFFF
               â•‘             â€¢ circleStrokeColor: bubbleColor
               â•‘             â€¢ circleTranslate: [0, 36]
               â•‘
  Layer 4: Icon Symbol (Emoji)
               â•‘
             â”Œâ”€ğŸ’¼â”€â”       â† SymbolLayer (text emoji)
             â”‚    â”‚          â€¢ Job: ğŸ’¼ Briefcase
             â””â”€â”€â”€â”€â”˜          â€¢ Service: ğŸ“ Pin
               â•‘             â€¢ CustomService: âœ¨ Sparkles
               â•‘
  Layer 3: Icon Background (White Circle)
             â”Œâ”€â”€â”€â”€â”
             â”‚    â”‚       â† CircleLayer
             â””â”€â”€â”€â”€â”˜          â€¢ circleColor: #FFFFFF
               â•‘             â€¢ circleRadius: 13px/16px
               â•‘
  Layer 2: Main Pin Body (Colored Circle)
           â”Œâ”€â”€â”€â”€â”€â”€â”
           â”‚      â”‚       â† CircleLayer
           â”‚      â”‚          â€¢ circleColor: bubbleColor
           â””â”€â”€â”€â”€â”€â”€â”˜          â€¢ circleStrokeColor: #FFFFFF
               â•‘             â€¢ circleRadius: 18px/22px
               â•‘
  Layer 1: Pin Pointer (Shadow Circle)
               â•‘
               â—           â† CircleLayer
                              â€¢ circleColor: bubbleColor
                              â€¢ circleTranslate: [0, 24]
                              â€¢ circleOpacity: 0.8


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  VISUAL APPEARANCE BY TYPE                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SERVICE PIN     â”‚  JOB PIN (FIXED) â”‚  JOB PIN (QUOTE)     â”‚
â”‚  (Green)         â”‚  (Orange)        â”‚  (Orange)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  â”‚                  â”‚                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚      â”‚       â”‚   â”‚      â”‚       â”‚   â”‚      â”‚          â”‚
â”‚   â”‚  ğŸ“  â”‚ â†#10B981  â”‚  ğŸ’¼  â”‚ â†#F59E0B  â”‚  ğŸ’¼  â”‚ â†#F59E0B â”‚
â”‚   â”‚      â”‚       â”‚   â”‚      â”‚       â”‚   â”‚      â”‚          â”‚
â”‚   â””â”€â”€â”¬â”€â”€â”€â”˜       â”‚   â””â”€â”€â”¬â”€â”€â”€â”˜       â”‚   â””â”€â”€â”¬â”€â”€â”€â”˜          â”‚
â”‚      â—           â”‚      â—           â”‚      â—              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚$250.00â”‚       â”‚  â”‚$200.00â”‚       â”‚  â”‚ Quote â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                  â”‚                  â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  SELECTED STATE (22% SCALE INCREASE)                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

      NORMAL (18px)         SELECTED (22px)

       â”Œâ”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚      â”‚             â”‚        â”‚
       â”‚  ğŸ’¼  â”‚   â†’â†’â†’â†’â†’â†’    â”‚   ğŸ’¼   â”‚
       â”‚      â”‚             â”‚        â”‚
       â””â”€â”€â”¬â”€â”€â”€â”˜             â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
          â—                     â—
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚$200.00â”‚            â”‚ $200.00 â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

      â€¢ Icon: 14px â†’ 18px
      â€¢ Pin: 18px â†’ 22px
      â€¢ Label: 10px â†’ 12px
      â€¢ Pointer: 4px â†’ 5px


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  COLOR MAPPING                                                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Listing Type        Color Code    Usage
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Service             #10B981       Pin body, label border/text
  Job                 #F59E0B       Pin body, label border/text
  CustomService       #8B5CF6       Pin body, label border/text


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  INTERACTION FLOW (Native Hit-Testing)                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  User Taps Pin
       â”‚
       â”œâ”€ Mapbox Native Layer
       â”‚   â””â”€ Feature Hit-Test (GPU)
       â”‚
       â”œâ”€ ShapeSource.onPress fires
       â”‚   â””â”€ event.features[0]
       â”‚
       â”œâ”€ handleShapeSourcePress()
       â”‚   â”œâ”€ Extract markerId from properties
       â”‚   â”œâ”€ Find marker in markers array
       â”‚   â””â”€ Call handleMarkerPress(marker)
       â”‚
       â””â”€ UI Updates
           â”œâ”€ Set selectedMarker state
           â”œâ”€ Animate camera to marker
           â””â”€ Update bottom info panel


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  FEATURE PROPERTIES (GeoJSON)                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  type: 'Feature',
  id: 'marker-123',
  geometry: {
    type: 'Point',
    coordinates: [-122.4194, 37.7749]
  },
  properties: {
    markerId: 'marker-123',         // For tap identification
    entityId: 'listing-456',        // Original entity
    entityType: 'listing',          // Type category
    title: 'Photography Services',  // Display name
    price: 250,                     // Numeric price
    priceLabel: '$250.00',          // Formatted string
    isPriceQuote: false,            // Quote vs fixed
    isSelected: false,              // Selection state
    isProvider: false,              // Provider marker
    bubbleColor: '#10B981',         // Dynamic color
    iconType: 'Service'             // Icon selector
  }
}


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  MAPBOX EXPRESSION EXAMPLES                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Conditional Sizing:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
circleRadius: [
  'case',
  ['get', 'isSelected'],
  22,   // If selected
  18    // If normal
]


Dynamic Color:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
circleColor: ['get', 'bubbleColor']
// Reads from feature.properties.bubbleColor
// Returns #10B981, #F59E0B, or #8B5CF6


Icon Selection:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
textField: [
  'case',
  ['==', ['get', 'iconType'], 'Job'],
  'ğŸ’¼',
  ['==', ['get', 'iconType'], 'CustomService'],
  'âœ¨',
  'ğŸ“'   // Default
]


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  PERFORMANCE CHARACTERISTICS                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Single GeoJSON FeatureCollection for all markers
âœ“ 6 Mapbox layers render entire collection in one pass
âœ“ GPU-accelerated native rendering (no JS overhead)
âœ“ Single onPress handler (not N handlers)
âœ“ Stable layer references (no re-creation on pan/zoom)
âœ“ Feature properties in native Mapbox memory
âœ“ No React reconciliation per marker
âœ“ Native hit-testing (no JS bridge delay)


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  LAYER ID REFERENCE                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Source:
  â€¢ markers-source              (ShapeSource with all features)

Layers:
  â€¢ markers-pointer             (CircleLayer - pin pointer)
  â€¢ markers-pin-body            (CircleLayer - main bubble)
  â€¢ markers-icon-bg             (CircleLayer - white icon bg)
  â€¢ markers-label-bg            (CircleLayer - label pill)
  â€¢ markers-icon                (SymbolLayer - emoji icon)
  â€¢ markers-label               (SymbolLayer - price/quote)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  END OF DIAGRAM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
